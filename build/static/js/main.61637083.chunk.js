(this["webpackJsonpinga-locmele-project-five"]=this["webpackJsonpinga-locmele-project-five"]||[]).push([[0],{100:function(e,t,s){"use strict";s.r(t);var a=s(1),i=s(2),n=s(16),r=s.n(n),o=s(6),c=s(12),l=s(13),d=s(20),h=s(15),u=s(14),j=(s(46),s(21)),b=s.n(j),p=s(11),m=s.n(p),O=s(25);s(75),s(78);O.a.initializeApp({apiKey:"AIzaSyAbfxQEJtNgZRkJUgvkv7nJOwcZzoR2A-o",authDomain:"project5-2f3c6.firebaseapp.com",projectId:"project5-2f3c6",storageBucket:"project5-2f3c6.appspot.com",messagingSenderId:"693020103862",appId:"1:693020103862:web:a1335a3545f882c8eac217"});var g=O.a,v=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={visible:!1,itemInWishList:!1,itemAlreadyInList:!1,idWishlist:"",titleWishlist:"",companyWishlist:"",jobUrlWishlist:""},a}return Object(l.a)(s,[{key:"addToWishlist",value:function(e,t,s,a){var i=this;s&&""!=s||(s="---"),t&&""!=t||(t="---"),a&&""!=a||(a='<a href="#"></a>'),this.setState({idWishlist:e,titleWishlist:t,companyWishlist:s,jobUrlWishlist:a,itemInWishList:!1,itemAlreadyInList:!1},(function(){g.database().ref("".concat(i.props.passUserId)).once("value").then((function(e){e.child("".concat(t)).exists()?(i.setState({itemAlreadyInList:!0}),setTimeout((function(){i.setState({itemAlreadyInList:!1})}),2e3)):(i.setState({itemInWishList:!0}),setTimeout((function(){i.setState({itemInWishList:!1})}),2500))}));var e=i.state,t=e.idWishlist,s=e.titleWishlist,a=e.companyWishlist,n=e.jobUrlWishlist;g.database().ref("".concat(i.props.passUserId)).child(t).set({jobKey:t,jobTitle:s,company:a,jobUrl:n})}))}},{key:"showData",value:function(e){this.setState({visible:!this.state.visible,idCliked:e})}},{key:"render",value:function(){var e=this,t=this.props,s=t.keyId,i=t.jobTitle,n=t.company,r=t.category,o=t.time,c=t.description,l=t.jobUrl,d=t.contract,h=t.classIndex;return Object(a.jsxs)("div",{className:h,children:[Object(a.jsxs)("div",{className:"wishListManage",children:[this.state.itemInWishList?Object(a.jsx)("h6",{children:"item added"}):null,this.state.itemAlreadyInList?Object(a.jsx)("h6",{children:"item is already on list"}):null]}),Object(a.jsxs)("div",{className:"jobDescription",children:[Object(a.jsxs)("div",{className:"title",children:[i&&""!==i?Object(a.jsx)("h2",{children:m()(i)}):Object(a.jsx)("h2",{children:"Other Jobs"}),"Unknown"!==r&&r&&""!==r?Object(a.jsx)("h5",{children:m()(r)}):null]}),Object(a.jsxs)("div",{className:"company",children:[n&&""!==n?Object(a.jsx)("h3",{children:m()(n)}):Object(a.jsx)("h3",{children:"---"}),d&&""!==d?Object(a.jsx)("h4",{children:m()(d)}):null]}),Object(a.jsxs)("div",{className:"buttonsInfo",children:[Object(a.jsx)("button",{className:"showDetails",onClick:function(){return e.showData(s)},children:this.state.visible?"Hide Details":"Show Details"}),null!=this.props.passUserId?Object(a.jsx)("button",{className:"saveForLater",onClick:function(){return e.addToWishlist(s,i,n,l)},children:"Save For Later"}):Object(a.jsx)("button",{className:"saveForLater disabledButton",disabled:!0,children:"Sign In to use Wish List"})]})]}),this.state.visible&&this.state.idCliked==s?Object(a.jsxs)("div",{className:"description",children:[Object(a.jsxs)("div",{children:[c&&""!==c?Object(a.jsx)("p",{children:m()(c)}):Object(a.jsx)("p",{children:"No Description"}),o&&""!==o?Object(a.jsxs)("time",{dateTime:o.split("T")[0],children:["Date Created: ",o.split("T")[0]]}):null]}),l&&""!==l?Object(a.jsx)("a",{href:l,children:"Read More & Apply"}):null]}):null]})}}]),s}(i.Component),x=s(40),w=s(9),f=s(7),y=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).removeJobFromWishlist=function(e){g.database().ref("".concat(a.props.passUserId)).child(e).remove()},a.state={dataFromFirebase:[]},a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(e,t){var s=this;e.passUserId!==this.props.passUserId&&g.database().ref("".concat(this.props.passUserId)).on("value",(function(e){var t=[],a=e.val();for(var i in a)t.push({key:i,dataFirebase:a[i]});s.setState({dataFromFirebase:t})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("ul",{className:"wishList",children:this.state.dataFromFirebase.map((function(t){return Object(a.jsxs)("li",{className:"eachWish",children:[Object(a.jsx)("div",{className:"closeButtonWish",children:Object(a.jsx)("button",{className:"removeFromWishlist",onClick:function(){return e.removeJobFromWishlist(t.key)},"aria-label":"Close sign in form",children:Object(a.jsx)(w.a,{icon:f.f})})}),t.dataFirebase.jobTitle&&""!==t.dataFirebase.jobTitle?Object(a.jsx)("h2",{children:m()(t.dataFirebase.jobTitle)}):Object(a.jsx)("h2",{children:"---"}),t.dataFirebase.company&&""!==t.dataFirebase.company?Object(a.jsx)("h3",{children:m()(t.dataFirebase.company)}):Object(a.jsx)("h3",{children:"---"}),t.dataFirebase.jobUrl&&""!==t.dataFirebase.jobUrl?Object(a.jsx)("a",{href:t.dataFirebase.jobUrl,children:"Apply Here"}):Object(a.jsx)("p",{children:"---"})]},t.key)}))})}}]),s}(i.Component),C=s(18),S=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleChangeNewUser=function(e){a.setState({passwordsSame:!0,errorMessage:""});var t=e.target.value;a.setState(Object(C.a)({},e.target.id,t))},a.handleSubmitNewUser=function(e){e.preventDefault(),a.state.password===a.state.passwordConfirm?g.auth().createUserWithEmailAndPassword(a.state.email,a.state.password).then((function(e){a.setState({email:"",password:"",passwordConfirm:"",showRegister:!1})})).catch((function(e){a.setState({errorMessage:e.message,showRegister:!0})})):a.setState({passwordsSame:!1})},a.handleChangeLogIn=function(e){var t,s=e.target.value;a.setState((t={},Object(C.a)(t,e.target.id,s),Object(C.a)(t,"errorLogIn",""),t))},a.handleSubmitLogIn=function(e){e.preventDefault(),g.auth().signInWithEmailAndPassword(a.state.email2,a.state.password2).then((function(e){a.setState({email2:"",password2:""})})).catch((function(e){a.setState({errorLogIn:e.message})}))},a.showLogIn=function(e){e.preventDefault(),a.setState({showLogInForm:!0})},a.hideForms=function(e){e.preventDefault(),a.setState({showLogInForm:!1,showRegister:!1,errorMessage:"",errorLogIn:"",passwordsSame:!0,email:"",password:"",passwordConfirm:"",email2:"",password2:""})},a.showRegister=function(e){e.preventDefault(),a.setState({showRegister:!0,email2:"",password2:"",errorLogIn:""})},a.cancelRegister=function(e){e.preventDefault(),a.setState({showRegister:!1,errorMessage:"",passwordsSame:!0,email:"",password:"",passwordConfirm:""})},a.state={email:"",password:"",passwordConfirm:"",email2:"",password2:"",passwordsSame:!0,errorMessage:"",signedOut:!1,errorLogIn:!1,showLogInForm:!1,showRegister:!1},a}return Object(l.a)(s,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{type:"submit",onClick:this.showLogIn,"aria-label":"Sign In",children:Object(a.jsx)(w.a,{icon:f.e,size:"3x"})}),this.state.showLogInForm&&Object(a.jsxs)("div",{className:"registerFields",children:[Object(a.jsx)("button",{type:"submit",onClick:this.hideForms,className:"closeForm","aria-label":"Close sign in form",children:Object(a.jsx)(w.a,{icon:f.f,size:"3x"})}),Object(a.jsx)("h2",{children:"Sign In"}),!this.state.showRegister&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmitLogIn,"aria-live":"polite",children:[Object(a.jsx)("label",{htmlFor:"email2",className:"srOnly",children:"Email Address"}),Object(a.jsx)("input",{type:"email",id:"email2",name:"inputForm2",value:this.state.email2,placeholder:"Email Address",required:!0,onChange:this.handleChangeLogIn}),Object(a.jsx)("label",{htmlFor:"password2",className:"srOnly",children:"Password"}),Object(a.jsx)("input",{type:"password",id:"password2",name:"inputForm2",value:this.state.password2,placeholder:"Password",required:!0,onChange:this.handleChangeLogIn}),Object(a.jsx)("button",{type:"submit",className:"registerButtons",children:"Sign In"})]}),Object(a.jsx)("p",{children:"or"}),Object(a.jsx)("button",{type:"submit",onClick:this.showRegister,className:"registerButtons",children:"Register New User"})]}),this.state.showRegister&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{onSubmit:this.handleSubmitNewUser,"aria-live":"polite",children:[Object(a.jsx)("label",{htmlFor:"email",className:"srOnly",children:"Email Address"}),Object(a.jsx)("input",{type:"email",id:"email",name:"inputForm",value:this.state.email,placeholder:"Email Address",required:!0,onChange:this.handleChangeNewUser}),Object(a.jsx)("label",{htmlFor:"password",className:"srOnly",children:"Password"}),Object(a.jsx)("input",{type:"password",id:"password",name:"inputForm",value:this.state.password,placeholder:"Password",required:!0,onChange:this.handleChangeNewUser}),Object(a.jsx)("label",{htmlFor:"passwordConfirm",className:"srOnly",children:"Confirm Password:"}),Object(a.jsx)("input",{type:"password",id:"passwordConfirm",name:"inputForm",value:this.state.passwordConfirm,placeholder:"Confirm Password",required:!0,onChange:this.handleChangeNewUser}),Object(a.jsx)("button",{type:"submit",className:"registerButtons",children:"Create User & Log In"})]}),Object(a.jsx)("button",{type:"submit",onClick:this.cancelRegister,className:"return",children:"Go Back"})]}),Object(a.jsxs)("div",{className:"logInErrors",children:[!this.state.passwordsSame&&Object(a.jsx)("h6",{children:"Password doesn't match!"}),""!==this.state.errorMessage&&Object(a.jsx)("h6",{children:this.state.errorMessage}),this.state.errorLogIn&&Object(a.jsx)("h6",{children:this.state.errorLogIn})]})]})]})}}]),s}(i.Component),N=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).handleChange=function(t){e.setState({selectedOption:t})},e.handleChangeForm=function(t){e.setState({value:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""!==e.state.value&&e.setState({keywordsConverted:e.state.value.replaceAll(" ","%20").replace(/^/,"&what="),previousKeywords:e.state.value,value:"",showEnteredKeywords:!0,selectedOption:Object(o.a)(Object(o.a)({},e.state.selectedOption),{},{pageNum:1})})},e.removeKeywords=function(t){t.preventDefault(),e.setState({value:"",keywordsConverted:"",previousKeywords:"",showEnteredKeywords:!1,selectedOption:Object(o.a)(Object(o.a)({},e.state.selectedOption),{},{pageNum:1})})},e.pageCountFunc=function(){e.state.keywordCountValue>0?e.setState({maxPageCount:Math.ceil(e.state.keywordCountValue/50)}):e.setState({maxPageCount:Math.ceil(e.state.selectedOption.count/50)})},e.nextPage=function(t){t.preventDefault(),e.setState({prevButtonDisabled:!1}),e.state.selectedOption.pageNum+1<=e.state.maxPageCount&&e.setState((function(t){return{selectedOption:Object(o.a)(Object(o.a)({},t.selectedOption),{},{pageNum:e.state.selectedOption.pageNum+1})}}))},e.previousPage=function(t){t.preventDefault(),e.setState({nextButtonDisabled:!1}),e.state.selectedOption.pageNum-1>0&&e.setState((function(t){return{selectedOption:Object(o.a)(Object(o.a)({},t.selectedOption),{},{pageNum:e.state.selectedOption.pageNum-1})}}))},e.reloadPage=function(){window.location.reload()},e.logOut=function(){g.auth().signOut().then((function(){window.location.reload()})).catch((function(e){this.setState({errorLogOut:!0,usersEmail:""})}))},e.state={errorMessage:"",showErrorMessage:!1,noFieldsErrorMessage:!1,showPageCount:!0,countryList:[],allJobs:[],selectedOption:{value:"",label:"All Toronto Area",count:1,pageNum:1},value:"",keywordsConverted:"",previousKeywords:"",showEnteredKeywords:!1,pageCount:"",maxPageCount:1,nextButtonDisabled:!1,prevButtonDisabled:!1,usersEmail:"",signedOut:!1,errorLogOut:!1},e.handleChange=e.handleChange.bind(Object(d.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(d.a)(e)),e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;g.auth().onAuthStateChanged((function(t){if(t){var s=t.uid;e.setState({userLoggedIn:s,usersEmail:t.email})}else e.setState({signedOut:!0})})),b()({method:"GET",url:"https://api.adzuna.com/v1/api/jobs/ca/geodata?app_id=18a606b4&app_key=35897d0612c0636126c9cdeddc06f44d&location0=Canada&location1=Ontario&location2=Toronto",responseType:"json"}).then((function(t){for(var s=[{value:"",label:"All Toronto Area",count:1,pageNum:1}],a=0;a<t.data.locations.length;a++)s.push({value:t.data.locations[a].location.area[3].replaceAll(" ","%20").replace(/^/,"&location3="),label:t.data.locations[a].location.display_name,count:t.data.locations[a].count,pageNum:1});e.setState({countryList:s})})).catch((function(t){e.setState({errorMessage:t.message,showErrorMessage:!0,showPageCount:!1})})),b()({method:"GET",url:"https://api.adzuna.com/v1/api/jobs/ca/search/1?app_id=18a606b4&app_key=35897d0612c0636126c9cdeddc06f44d&results_per_page=50&location0=Canada&location1=Ontario&location2=Toronto&sort_by=date",responseType:"json"}).then((function(t){e.setState({selectedOption:Object(o.a)(Object(o.a)({},e.state.selectedOption),{},{count:t.data.count})})})).catch((function(t){e.setState({errorMessage:t.message,showErrorMessage:!0,showPageCount:!1})}))}},{key:"componentDidUpdate",value:function(e,t){var s=this;this.state.selectedOption===t.selectedOption&&this.state.keywordsConverted===t.keywordsConverted||b()({method:"GET",url:"https://api.adzuna.com/v1/api/jobs/ca/search/".concat(this.state.selectedOption.pageNum,"?app_id=18a606b4&app_key=35897d0612c0636126c9cdeddc06f44d&results_per_page=50").concat(this.state.keywordsConverted,"&location0=Canada&location1=Ontario&location2=Toronto").concat(this.state.selectedOption.value,"&sort_by=date"),responseType:"json"}).then((function(e){for(var t=e.data.results,a=0;a<t.length;a++)t[a].class=a%2===0?"jobListing classOne":"jobListing classTwo";s.setState({allJobs:t,keywordCountValue:e.data.count,showPageCount:!0,noFieldsErrorMessage:!1}),"1"==s.state.selectedOption.pageNum&&s.setState({prevButtonDisabled:!0}),s.pageCountFunc(),s.state.maxPageCount>1&&s.setState({nextButtonDisabled:!1}),s.state.selectedOption.pageNum==s.state.maxPageCount&&s.setState({nextButtonDisabled:!0}),0==e.data.count&&s.setState({noFieldsErrorMessage:!0,showPageCount:!1})})).catch((function(e){s.setState({errorMessage:e.message,showErrorMessage:!0,showPageCount:!1})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"App",children:[this.state.showErrorMessage&&Object(a.jsx)("div",{className:"blockView",children:Object(a.jsxs)("div",{className:"error",children:[Object(a.jsx)("h6",{children:"Sorry... Something went wrong, not all data can be retrieved."}),Object(a.jsx)("button",{onClick:this.reloadPage,children:"Try again!"}),Object(a.jsx)("p",{children:this.state.errorMessage})]})}),Object(a.jsx)("header",{children:Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsxs)("div",{className:"logIn",children:[Object(a.jsx)("h1",{children:"Find Your Job In Toronto"}),Object(a.jsxs)("div",{className:"logInFields",children:[this.state.usersEmail?Object(a.jsxs)("h5",{className:"signIn",children:["Logged in as ",this.state.usersEmail]}):null,this.state.errorLogOut&&Object(a.jsx)("h5",{className:"signIn",children:"Log Out failed!"}),!this.state.usersEmail&&Object(a.jsx)("h5",{className:"signIn",children:"Sign In"}),this.state.usersEmail?null:Object(a.jsx)(S,{}),this.state.usersEmail?Object(a.jsx)("button",{type:"submit",className:"logOut",onClick:this.logOut,"aria-label":"Log out",children:Object(a.jsx)(w.a,{icon:f.c,size:"2x"})}):null]})]}),Object(a.jsxs)("div",{className:"searchFields",children:[Object(a.jsxs)("div",{className:"citySearch",children:[Object(a.jsx)(x.a,{value:this.state.selectedOption,onChange:this.handleChange,options:this.state.countryList,theme:function(e){return Object(o.a)(Object(o.a)({},e),{},{borderRadius:5,colors:Object(o.a)(Object(o.a)({},e.colors),{},{primary25:"#efa50e",primary:"#4e007a"})})}}),this.state.showPageCount&&Object(a.jsxs)("div",{className:"nextPrevButtons",children:[Object(a.jsx)("button",{type:"submit",onClick:this.previousPage,disabled:this.state.prevButtonDisabled,"aria-label":"previous page",children:Object(a.jsx)(w.a,{icon:f.a,"aria-hidden":"true"})}),Object(a.jsxs)("p",{className:"pageCount",children:["".concat(this.state.selectedOption.pageNum," of ").concat(this.state.maxPageCount)," "]}),Object(a.jsx)("button",{type:"submit",onClick:this.nextPage,disabled:this.state.nextButtonDisabled,"aria-label":"Next page",children:Object(a.jsx)(w.a,{icon:f.b,"aria-hidden":"true"})})]})]}),Object(a.jsxs)("div",{className:"keywords",children:[Object(a.jsxs)("form",{className:"keywordForm",children:[Object(a.jsx)("label",{htmlFor:"searchBy",className:"srOnly",children:"Search by job title, keywords, or company"}),Object(a.jsx)("input",{id:"searchBy",type:"text",value:this.state.value,onChange:this.handleChangeForm,placeholder:"Job title,  keywords, or company"}),Object(a.jsx)("button",{type:"submit",onClick:this.handleSubmit,"aria-label":"Search",children:Object(a.jsx)(w.a,{icon:f.d,size:"2x"})})]}),Object(a.jsx)("div",{className:"keywordsDiv",children:this.state.showEnteredKeywords&&Object(a.jsxs)("div",{className:"searchOptions",children:[Object(a.jsxs)("p",{children:['Current search by: "',this.state.previousKeywords,'"']}),Object(a.jsx)("button",{type:"submit",onClick:this.removeKeywords,children:"Clear Keywords"})]})})]})]})]})}),Object(a.jsxs)("main",{className:"wrapper",children:[Object(a.jsxs)("section",{children:[this.state.noFieldsErrorMessage&&Object(a.jsx)("div",{className:"errorNoResults",children:Object(a.jsx)("h6",{children:"No Search Results, please try again!"})}),Object(a.jsx)("ul",{children:this.state.allJobs.map((function(t){return Object(a.jsx)("li",{children:Object(a.jsx)(v,{passUserId:e.state.userLoggedIn,keyId:t.id,jobTitle:t.title,company:t.company.display_name,contract:t.contract_type,category:t.category.label,time:t.created,description:t.description,jobUrl:t.redirect_url,classIndex:t.class,inFirebase:t.itemInFirebase})},t.id)}))})]}),Object(a.jsxs)("aside",{children:[!this.state.userLoggedIn&&Object(a.jsx)("h5",{children:"Sign In To Add Items To Wish List"}),this.state.userLoggedIn&&Object(a.jsx)("h5",{children:"Saved Jobs"}),Object(a.jsx)(y,{passUserId:this.state.userLoggedIn,passSelectedOption:this.state.selectedOption,passKeywordsConverted:this.state.keywordsConverted})]})]})]})}}]),s}(i.Component),I=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,101)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),i(e),n(e),r(e)}))};r.a.render(Object(a.jsx)("div",{children:Object(a.jsx)(N,{})}),document.getElementById("root")),I()},46:function(e,t,s){}},[[100,1,2]]]);
//# sourceMappingURL=main.61637083.chunk.js.map